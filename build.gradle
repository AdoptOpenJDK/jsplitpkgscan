apply plugin: 'application'
apply plugin: 'java'

mainClassName = 'jdk.Main'
sourceCompatibility = 9
targetCompatibility = 9

jar {
    manifest {
        attributes 'Main-Class': mainClassName
        metaInf {
            from file('.')
            include 'LICENSE'
        }
    }
}

jar.doLast {
    // temporary work around to enable main class
    // using the jar executable
    Exec jarTask = task(jarTask, type: Exec)
    jarTask.commandLine  System.properties['java.home'] + '/bin/jar',
                         '--update',
                         '--main-class',
                         mainClassName,
                         '--file',
                         jar.archivePath
    jarTask.execute()
}